(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8042],{24654:function(){},35226:function(e,t,n){Promise.resolve().then(n.bind(n,22764))},23019:function(e,t,n){"use strict";n.d(t,{H:function(){return o},p:function(){return i}});let a=n(68989),r="bf3c199c2470cb477d907b1e0917c17b",c="5183666c72eec9e4",o=e=>{let t=Array.isArray(e)?JSON.stringify(e):e.toString(),n=a.createCipheriv("aes-256-cbc",r,c);return n.update(t,"utf8","base64")+n.final("base64")},i=e=>{let t=a.createDecipheriv("aes-256-cbc",r,c),n=t.update(e,"base64","utf8");n+=t.final("utf8");try{return JSON.parse(n)}catch(e){return n}}},22764:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var a=n(57437),r=n(23019),c=n(16210),o=n(91991),i=n(5002),s=n(72135),l=n(21348),u=n(54321),d=n(31353),p=n(82253),h=n(98779),f=n(59832),g=n(99115),m=n(87293),v=n(35791),y=n(9026),b=n(77468),j=n(12258),w=n(79507),x=n(2265),_=n(50029),Z=n(83464),P=n(99376);let S=["JPG","PNG","GIF"];function k(){var e;let t=(0,u.useCookies)(),[n,k]=(0,x.useState)(!1),[C,D]=(0,x.useState)([]),{id:O}=(0,P.useParams)(),{open:E,close:T}=(0,s.lm)(),A=()=>{k(!1)},N=(0,r.p)(null!==(e=t.get("token"))&&void 0!==e?e:"");(0,c.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});let{queryResult:F}=(0,s.x3)({metaData:{headers:{Authorization:"Bearer ".concat(N)}}}),q=async e=>{console.log(e),null==E||E({type:"progress",message:"Please wait uploading",undoableTimeout:20});let t=new FormData;for(let n of e)t.append("file",n);t.append("parent_dir",O.toString()),t.append("name","none");let n={method:"POST",url:"".concat(m.T,"edpl/photos/"),headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(N)},data:t};try{let{data:e}=await Z.Z.request(n);null==E||E({type:"success",message:"Success",description:"Uploaded"}),k(!1)}catch(e){console.error(e),k(!1)}D(C)},z=async e=>{null==E||E({type:"progress",message:"Please wait Deleting",undoableTimeout:3});let t={method:"DELETE",url:"".concat(m.T,"edpl/photos/").concat(e),headers:{"content-type":"multipart/form-data",Authorization:"Bearer ".concat(N)}};try{let{data:e}=await Z.Z.request(t);null==E||E({type:"error",message:"Success",description:"Deleted !"}),k(!1)}catch(e){console.error(e),k(!1)}D(C)},{data:L,isLoading:B}=F,G=null==L?void 0:L.data;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{variant:"outlined",onClick:()=>{k(!0)},children:"Add Image"}),(0,a.jsxs)(v.Z,{open:n,onClose:A,PaperProps:{component:"form",onSubmit:e=>{e.preventDefault(),Object.fromEntries(new FormData(e.currentTarget).entries()),A()}},children:[(0,a.jsx)(w.Z,{children:"Upload Photo"}),(0,a.jsxs)(b.Z,{children:[(0,a.jsx)(j.Z,{children:"Multiple Photos can be uploaded ."}),(0,a.jsx)(_.b,{handleChange:q,multiple:!0,name:"file",types:S})]}),(0,a.jsxs)(y.Z,{children:[(0,a.jsx)(o.Z,{onClick:A,children:"Cancel"}),(0,a.jsx)(o.Z,{type:"submit",children:"Subscribe"})]})]}),(0,a.jsx)(l.di,{isLoading:B,children:B?(0,a.jsx)(i.Z,{variant:"h6",children:"Loading..."}):(0,a.jsxs)(d.Z,{sx:{width:"100%",height:"100%"},cols:5,rowHeight:164,children:[(0,a.jsx)(p.Z,{},"Subheader"),G&&G.map(e=>(0,a.jsxs)(p.Z,{style:{width:"200px",height:"200px"},children:[(0,a.jsx)("img",{srcSet:"".concat(m._).concat(e.file_name),src:"".concat(m._).concat(e.file_name),alt:e.name,style:{width:"200px",height:"200px",objectFit:"contain"},loading:"lazy"}),(0,a.jsx)(h.Z,{title:e.name,actionIcon:(0,a.jsx)(f.Z,{onClick:()=>{z(e._id)},sx:{color:"rgba(255, 255, 255, 0.54)"},"aria-label":"info about ".concat(e.name),children:(0,a.jsx)(g.Z,{})})})]},e.name))]})})]})}},87293:function(e,t,n){"use strict";n.d(t,{T:function(){return u},myDataProvider:function(){return p},_:function(){return d}});var a=n(88017);let r=e=>{if(e&&e.length>0){let t=[],n=[];return e.map(e=>{t.push(e.field),n.push(e.order)}),{_sort:t,_order:n}}},c=e=>{switch(e){case"ne":case"gte":case"lte":return"_".concat(e);case"contains":return"_like";default:return""}},o=e=>{let t={};return e&&e.map(e=>{if("or"===e.operator||"and"===e.operator)throw Error("[@refinedev/simple-rest]: `operator: ".concat(e.operator,"` is not supported. You can create custom data provider. https://refine.dev/docs/api-reference/core/providers/data-provider/#creating-a-data-provider"));if("field"in e){let{field:n,operator:a,value:r}=e;if("q"===n){t[n]=r;return}let o=c(a);t["".concat(n).concat(o)]=r}}),t};var i=n(83464),s=n(64131);let l=i.Z.create();l.interceptors.request.use(e=>{let t=s.Z.get("uuid");return t&&(e.headers.uuid=t),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t,n,a;return Promise.reject({...e,message:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message,statusCode:null===(a=e.response)||void 0===a?void 0:a.status})});var u="",d="";d="http://195.35.22.220:8080/assets/uploads/";let p={...function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return{getList:async n=>{let{resource:c,pagination:i,filters:s,sorters:l,meta:u}=n;console.log(s,"filters");let d="".concat(e,"/").concat(c),{current:p=1,pageSize:h=10,mode:f="server"}=null!=i?i:{},{headers:g,method:m}=null!=u?u:{},v=o(s),y={};"server"===f&&(y._start=(p-1)*h,y._end=p*h);let b=r(l);if(b){let{_sort:e,_order:t}=b;y._sort=e.join(","),y._order=t.join(",")}let j={...y,...v},w=Object.keys(j).length?"".concat(d,"?").concat((0,a.stringify)(j)):d;var x={...g};let{data:_,headers:Z}=await t[null!=m?m:"get"](w,{headers:x});return{data:_,total:+Z["x-total-count"]||_.length}},getMany:async n=>{let{resource:r,ids:c,meta:o}=n,{headers:i,method:s}=null!=o?o:{},{data:l}=await t[null!=s?s:"get"]("".concat(e,"/").concat(r,"?").concat((0,a.stringify)({id:c})),{headers:i});return{data:l}},create:async n=>{let{resource:a,variables:r,meta:c}=n,o="".concat(e,"/").concat(a),{headers:i,method:s}=null!=c?c:{};var l={...i};let{data:u}=await t[null!=s?s:"post"](o,r,{headers:l});return{data:u}},update:async n=>{let{resource:a,id:r,variables:c,meta:o}=n,i="".concat(e,"/").concat(a,"/").concat(r),{headers:s,method:l}=null!=o?o:{};var u={...s};let{data:d}=await t[null!=l?l:"put"](i,c,{headers:u});return{data:d}},getOne:async n=>{let{resource:a,id:r,meta:c}=n,o="".concat(e,"/").concat(a,"/").concat(r),{headers:i,method:s}=null!=c?c:{},{data:l}=await t[null!=s?s:"get"](o,{headers:i});return{data:l}},deleteOne:async n=>{let{resource:a,id:r,variables:c,meta:o}=n,i="".concat(e,"/").concat(a,"/").concat(r),{headers:s,method:l}=null!=o?o:{},{data:u}=await t[null!=l?l:"delete"](i,{data:c,headers:s});return{data:u}},getApiUrl:()=>e,custom:async e=>{let n,{url:c,method:i,filters:s,sorters:l,payload:u,query:d,headers:p}=e,h="".concat(c,"?");if(l){let e=r(l);if(e){let{_sort:t,_order:n}=e,r={_sort:t.join(","),_order:n.join(",")};h="".concat(h,"&").concat((0,a.stringify)(r))}}if(s){let e=o(s);h="".concat(h,"&").concat((0,a.stringify)(e))}switch(d&&(h="".concat(h,"&").concat((0,a.stringify)(d))),i){case"put":case"post":case"patch":n=await t[i](c,u,{headers:p});break;case"delete":n=await t.delete(c,{data:u,headers:p});break;default:n=await t.get(h,{headers:p})}let{data:f}=n;return Promise.resolve({data:f})}}}(u="http://195.35.22.220:8080/api")}}},function(e){e.O(0,[7999,936,8218,2957,7258,4349,4440,3825,5016,1269,2971,2117,1744],function(){return e(e.s=35226)}),_N_E=e.O()}]);