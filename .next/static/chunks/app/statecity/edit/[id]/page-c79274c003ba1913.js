(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9131],{24654:function(){},54105:function(e,t,r){Promise.resolve().then(r.bind(r,60623))},23019:function(e,t,r){"use strict";r.d(t,{H:function(){return o},p:function(){return s}});let n=r(68989),i="bf3c199c2470cb477d907b1e0917c17b",a="5183666c72eec9e4",o=e=>{let t=Array.isArray(e)?JSON.stringify(e):e.toString(),r=n.createCipheriv("aes-256-cbc",i,a);return r.update(t,"utf8","base64")+r.final("base64")},s=e=>{let t=n.createDecipheriv("aes-256-cbc",i,a),r=t.update(e,"base64","utf8");r+=t.final("utf8");try{return JSON.parse(r)}catch(e){return r}}},60623:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(57437),i=r(1899),a=r(12713),o=r(91991),s=r(21348),c=r(4926),u=r(29501),l=r(23019),d=r(54321),f=r(2265);r(83464),r(40377);var h=r(99115);function p(){var e,t,r,p;let g=(0,d.useCookies)(),v=(0,l.p)(null!==(p=g.get("token"))&&void 0!==p?p:""),{saveButtonProps:m,register:y,control:x,setValue:Z,refineCore:{onFinish:b,formLoading:k,queryResult:S},formState:{errors:j},watch:C}=(0,c.cI)({defaultValues:{cities:["a","b"]},refineCoreProps:{metaData:{headers:{Authorization:"Bearer ".concat(v)}}}});null==S||null===(e=S.data)||void 0===e||e.data.cities;let{fields:w,append:N,remove:O}=(0,u.Dq)({control:x,name:"cities"});console.log(S);let[P,_]=(0,f.useState)([]),[I,E]=(0,f.useState)(""),[L,A]=(0,f.useState)(0);return(0,f.useEffect)(()=>{var e,t;L<3&&S&&(null===(t=S.data)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.cities)&&(Z("cities",S.data.data.cities),A(e=>e+1))},[S,L]),k?(0,n.jsx)(n.Fragment,{children:"Loading"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s.I8,{saveButtonProps:m,children:[(0,n.jsx)(i.Z,{component:"form",children:(0,n.jsx)(n.Fragment,{children:w.map((e,t)=>{let{id:r}=e;return(0,n.jsxs)(i.Z,{sx:{display:"inline-flex",alignItems:"center",marginRight:"15px"},children:[(0,n.jsx)(u.Qr,{control:x,name:"cities[".concat(t,"]"),render:e=>{let{field:r}=e;return(0,n.jsx)(a.Z,{...y("cities[".concat(t,"]")),...r,error:!!(null==j?void 0:j.cities),helperText:j.cities&&"".concat(j.cities.message),margin:"normal",required:!0,fullWidth:!0,id:"City",label:"City - ".concat(t+1)})}}),(0,n.jsx)(h.Z,{onClick:()=>{O(t)},sx:{color:"red",cursor:"pointer"}})]},r)})})}),(0,n.jsx)("p",{children:j.cities&&"".concat(null===(r=j.cities)||void 0===r?void 0:null===(t=r.root)||void 0===t?void 0:t.message)}),(0,n.jsx)(o.Z,{variant:"outlined",fullWidth:!0,onClick:()=>{N("")},children:"Add a city"})]})})}},16558:function(e,t,r){"use strict";r.r(t),r.d(t,{API_URL:function(){return o},authProvider:function(){return c},photos:function(){return s}});var n=r(83464),i=r(64131),a=r(23019),o="",s="";o="http://195.35.22.220:8080/api/";let c={login:async e=>{let{email:t,password:r,remember:s}=e;try{let e={method:"POST",url:"".concat(o,"auth/sales_team/login"),headers:{"content-type":"application/json"},data:{email:t,password:r}},{data:c}=await n.Z.request(e);if(JSON.parse(JSON.stringify(c)),null==c)return{success:!1,error:{name:"LoginError",message:"Invalid username or password"}};{let{message:e,access:t,uuid:r}=c;return i.Z.set("token",(0,a.H)(e),{expires:s?30:1,path:"/"}),i.Z.set("date",(0,a.H)(t.toString()),{expires:s?30:1,path:"/"}),i.Z.set("uuid",r,{expires:s?30:1,path:"/"}),window.location.href="/approvedProjects?pageSize=100&current=1",{success:!0}}}catch(e){return console.error("Login error:",e),{success:!1,error:{name:"LoginError",message:"Invalid username or password"}}}},logout:async()=>(i.Z.remove("date",{path:"/"}),i.Z.remove("date",{path:"/"}),i.Z.remove("token",{path:"/"}),window.location.href="/login",{success:!0}),check:async()=>{let e=i.Z.get("token"),t=i.Z.get("date"),r=i.Z.get("uuid");return e&&t&&r?{authenticated:!0}:{authenticated:!1,logout:!0,redirectTo:"/"}},getPermissions:async()=>i.Z.get("date")||null,getIdentity:async()=>i.Z.get("date")||null,onError:async e=>{var t;return(console.log(e),(null===(t=e.response)||void 0===t?void 0:t.status)===401)?{logout:!0}:{error:e}}}},40377:function(e,t,r){"use strict";r.d(t,{T5:function(){return n.API_URL},L1:function(){return i}});var n=r(16558);let i={check:async e=>{var t=JSON.parse(JSON.stringify(null!=e?e:{}));let r=t.token,n=t.date,i=t.uuid;return r&&n&&i?{authenticated:!0}:{authenticated:!1,logout:!0,redirectTo:"/"}}}}},function(e){e.O(0,[7999,936,8218,2957,7258,4349,4440,3825,5016,2971,2117,1744],function(){return e(e.s=54105)}),_N_E=e.O()}]);