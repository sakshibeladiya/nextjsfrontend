(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3964],{24654:function(){},93403:function(e,t,r){Promise.resolve().then(r.bind(r,70220))},70220:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var a=r(57437),n=r(74799),o=r(72135),d=r(21348),i=r(23019);r(2265);var s=r(54321),c=r(89800),l=r(91991);function p(){var e,t;let r=(0,s.useCookies)(),p=null!=r.get("date")?(0,i.p)(null!==(e=r.get("date"))&&void 0!==e?e:""):[],u=(0,i.p)(null!==(t=r.get("token"))&&void 0!==t?t:""),{options:m,queryResult:{isLoading:_,data:h}}=(0,o.L7)({resource:"auth/sales_team",optionValue:e=>e.uuid,optionLabel:e=>e.name,meta:{headers:{Authorization:"Bearer ".concat(u)}},hasPagination:!1});function f(e){let t=new Date(e),r=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return"".concat(r,"/").concat(a,"/").concat(n)}let y=[{field:"name",headerName:"Name",width:250,valueGetter:e=>{var t;return null===(t=e.row.name)||void 0===t?void 0:t.toUpperCase()}},{field:"date",headerName:"Date",width:150,valueGetter:e=>f(e.row.createdAt)},{field:"person_to_contact",headerName:"Person To Contact",width:200,valueGetter:e=>{let t=e.row.person_to_contact||[];return t.length>0&&t[0]&&t[0].company_person_name?t[0].company_person_name.toString().toUpperCase():""}},{field:"address1",headerName:"Address 1",width:400,valueGetter:e=>e.row.address.address1},{field:"address2",headerName:"Address 2",width:400,valueGetter:e=>e.row.address.address2},{field:"state",headerName:"State",width:200,valueGetter:e=>e.row.address.state},{field:"city",headerName:"City",width:200,valueGetter:e=>e.row.address.city},{field:"pincode",headerName:"Pincode",width:200,valueGetter:e=>e.row.address.pincode},{field:"customer_type",headerName:"Customer Type",width:200},{field:"customer_grade",headerName:"Customer Grade",width:200},{field:"customer_history",headerName:"Customer History",width:200},{field:"actions",headerName:"Actions",sortable:!1,renderCell:function(e){let{row:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.w6,{hideText:!0,recordItemId:t._id}),p.includes("admin")?(0,a.jsx)(d.m1,{hideText:!0,recordItemId:t._id,meta:{headers:{Authorization:"Bearer ".concat(u)}}}):(0,a.jsx)(a.Fragment,{})]})},align:"center",headerAlign:"center",minWidth:120}];p.includes("admin")&&y.unshift({field:"sid",headerName:"Added by",type:"singleSelect",headerAlign:"left",align:"left",minWidth:300,flex:.5,sortable:!1,valueOptions:m,valueFormatter:e=>e.value,renderCell:function(e){let{row:t}=e;if(_)return"Loading...";{var r;let e=m.find(e=>t.sid===e.value);return null==e?void 0:null===(r=e.label)||void 0===r?void 0:r.toUpperCase()}}});let{dataGridProps:v,setSorter:g}=(0,d.LU)({pagination:{current:1,pageSize:100,mode:"off"},filters:{mode:"off"},sorters:{mode:"off"},meta:{headers:{Authorization:"Bearer ".concat(u)}}}),{filterMode:C,filterModel:w,onFilterModelChange:b,...N}=v,{triggerExport:x,isLoading:A}=(0,o.S)({resource:"edpl/company",meta:{headers:{Authorization:"Bearer ".concat(u)}},mapData:e=>{var t,r=e.address||{},a=e.person_to_contact||[],n={id:e._id,name:e.name,added_by:null===(t=m.find(t=>e.sid===t.value))||void 0===t?void 0:t.label.toUpperCase(),address1:(r.address1||"").toUpperCase(),address2:(r.address2||"").toUpperCase(),state:(r.state||"").toUpperCase(),pincode:(r.pincode||"").toUpperCase(),city:(r.city||"").toUpperCase(),district:(r.district||"").toUpperCase(),landmark:(r.landmark||"").toUpperCase(),first_visited:f(e.first_visited),next_visit:f(e.next_visit)};a.length>0&&a.forEach((e,t)=>{n["person_to_contact_"+(t+1)]=e.company_person_name,n["company_person_email_"+(t+1)]=e.company_person_email,n["company_person_pno_"+(t+1)]=e.company_person_pno});var o=[];return Array.isArray(a)?a.forEach(e=>{if(Array.isArray(e)){var t={};e.forEach((e,r)=>{let a=r+1;t["person_to_contact_".concat(a)]=(e.company_person_name||"").toUpperCase(),t["company_person_email_".concat(a)]=(e.company_person_email||"").toUpperCase(),t["company_person_pno_".concat(a)]=(e.company_person_pno||"").toUpperCase()});for(let r=e.length+1;r<=5;r++)t["person_to_contact_".concat(r)]="",t["company_person_email_".concat(r)]="",t["company_person_pno_".concat(r)]="";o.push(t)}else console.error("Expected an array for contactList, but got:",e)}):console.error("Expected an array for person_to_contact, but got:",a),n}});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(d.aV,{title:"Company List",headerButtons:e=>{let{defaultButtons:t}=e;return(0,a.jsxs)(a.Fragment,{children:[t,(0,a.jsx)(c.Z,{children:(0,a.jsx)(l.Z,{onClick:()=>x(),disabled:A,variant:"contained",color:"primary",children:"Export"})})]})},children:(0,a.jsx)(n._$,{getRowId:e=>e._id,...v,columns:y,onSortModelChange:(e,t)=>{v.onSortModelChange(e,t)},autoHeight:!0})})})}},23019:function(e,t,r){"use strict";r.d(t,{H:function(){return d},p:function(){return i}});let a=r(68989),n="bf3c199c2470cb477d907b1e0917c17b",o="5183666c72eec9e4",d=e=>{let t=Array.isArray(e)?JSON.stringify(e):e.toString(),r=a.createCipheriv("aes-256-cbc",n,o);return r.update(t,"utf8","base64")+r.final("base64")},i=e=>{let t=a.createDecipheriv("aes-256-cbc",n,o),r=t.update(e,"base64","utf8");r+=t.final("utf8");try{return JSON.parse(r)}catch(e){return r}}}},function(e){e.O(0,[7999,936,8218,2957,7258,4349,4440,7571,4243,4799,4272,2971,2117,1744],function(){return e(e.s=93403)}),_N_E=e.O()}]);