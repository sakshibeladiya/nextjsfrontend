(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4075],{24654:function(){},53145:function(e,t,a){Promise.resolve().then(a.bind(a,22606))},22606:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(57437),n=a(74799),i=a(72135),d=a(21348),o=a(23019);a(2265);var l=a(54321),s=a(89800),u=a(91991);function c(){let e=(0,l.useCookies)(),t=(0,o.p)(null!==(y=e.get("token"))&&void 0!==y?y:""),a=null!=e.get("date")?(0,o.p)(null!==(N=e.get("date"))&&void 0!==N?N:""):[],{options:c,queryResult:{isLoading:m,data:f}}=(0,i.L7)({resource:"auth/sales_team",optionValue:e=>e.uuid,optionLabel:e=>e.name,meta:{headers:{Authorization:"Bearer ".concat(t)}},hasPagination:!1}),h=[{field:"company_name",headerName:"Company Name",width:250},{field:"customer_name",headerName:"Interacted With",width:250},{field:"data",headerName:"Remark",width:250,valueGetter:e=>e.row.data.remark},{field:"createdAt",headerName:"Visited On",width:170,valueGetter:e=>v(e.row.data.visited_date_time)},{field:"actions",headerName:"Actions",sortable:!1,renderCell:function(e){let{row:a}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.w6,{hideText:!0,recordItemId:a._id}),(0,r.jsx)(d.m1,{hideText:!0,recordItemId:a._id,meta:{headers:{Authorization:"Bearer ".concat(t)}}})]})},align:"center",headerAlign:"center",minWidth:120}];a.includes("admin")&&h.unshift({field:"spid",headerName:"Added by",type:"singleSelect",headerAlign:"left",align:"left",maxWidth:250,sortable:!1,flex:.5,valueOptions:c,valueFormatter:e=>e.value,renderCell:function(e){let{row:t}=e;if(m)return"Loading...";{let e=c.find(e=>t.spid===e.value);return null==e?void 0:e.label}}});let{dataGridProps:p}=(0,d.LU)({pagination:{current:1,pageSize:100,mode:"off"},filters:{mode:"off"},sorters:{mode:"off"},meta:{headers:{Authorization:"Bearer ".concat(t)}}});function v(e){let t=new Date(e),a=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return"".concat(a,"/").concat(r,"/").concat(n)}let{data:g,isLoading:_,isError:b}=(0,i.sm)({resource:"edpl/company",meta:{headers:{Authorization:"Bearer ".concat(t)}}});if(!_){var y,N,A=JSON.parse(JSON.stringify(null==g?void 0:g.data));console.log("ssss"),console.log(A[0])}let{triggerExport:x,isLoading:k}=(0,i.S)({resource:"edpl/daily_visit",meta:{headers:{Authorization:"Bearer ".concat(t)}},mapData:e=>{var t,a,r;if(!e||!(null==g?void 0:g.data))return console.error("Item or data is missing"),{};let n=g.data.find(t=>e.company_name===t.name),i=(null==n?void 0:n.customer_grade)||"N/A",d=(null==n?void 0:n.customer_type)||"N/A";return{visited_date_time:v(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.visited_date_time),spid:(null===(a=c.find(t=>e.spid===t.value))||void 0===a?void 0:a.label)||"Unknown",company_name:e.company_name||"Unnamed",customer_type:d,customer_grade:i,remark:(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.remark)||"No remark",added_on:v(e.createdAt)}}});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(d.aV,{title:"Daily Visits",headerButtons:e=>{let{defaultButtons:t}=e;return(0,r.jsxs)(r.Fragment,{children:[t,(0,r.jsx)(s.Z,{children:(0,r.jsx)(u.Z,{onClick:()=>x(),disabled:k,variant:"contained",color:"primary",children:"Export"})})]})},children:(0,r.jsx)(n._$,{className:"",getRowId:e=>e._id,...p,columns:h,disableVirtualization:!0,columnBuffer:50,autoHeight:!0})})})}},23019:function(e,t,a){"use strict";a.d(t,{H:function(){return d},p:function(){return o}});let r=a(68989),n="bf3c199c2470cb477d907b1e0917c17b",i="5183666c72eec9e4",d=e=>{let t=Array.isArray(e)?JSON.stringify(e):e.toString(),a=r.createCipheriv("aes-256-cbc",n,i);return a.update(t,"utf8","base64")+a.final("base64")},o=e=>{let t=r.createDecipheriv("aes-256-cbc",n,i),a=t.update(e,"base64","utf8");a+=t.final("utf8");try{return JSON.parse(a)}catch(e){return a}}}},function(e){e.O(0,[7999,936,8218,2957,7258,4349,4440,7571,4243,4799,4272,2971,2117,1744],function(){return e(e.s=53145)}),_N_E=e.O()}]);