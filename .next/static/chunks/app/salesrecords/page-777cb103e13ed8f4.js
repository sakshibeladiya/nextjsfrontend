(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3444],{24654:function(){},7961:function(e,t,r){Promise.resolve().then(r.bind(r,42021))},23019:function(e,t,r){"use strict";r.d(t,{H:function(){return o},p:function(){return d}});let n=r(68989),a="bf3c199c2470cb477d907b1e0917c17b",i="5183666c72eec9e4",o=e=>{let t=Array.isArray(e)?JSON.stringify(e):e.toString(),r=n.createCipheriv("aes-256-cbc",a,i);return r.update(t,"utf8","base64")+r.final("base64")},d=e=>{let t=n.createDecipheriv("aes-256-cbc",a,i),r=t.update(e,"base64","utf8");r+=t.final("utf8");try{return JSON.parse(r)}catch(e){return r}}},42021:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(57437),a=r(74799),i=r(72135),o=r(21348),d=r(23019);r(2265);var l=r(54321),c=r(91991),u=r(89800);function s(){var e,t;let r=(0,l.useCookies)(),s=(0,d.p)(null!==(e=r.get("token"))&&void 0!==e?e:""),{options:m,queryResult:{isLoading:f,data:h}}=(0,i.L7)({resource:"auth/sales_team",optionValue:e=>e.uuid,optionLabel:e=>e.name,meta:{headers:{Authorization:"Bearer ".concat(s)}},hasPagination:!1}),p=null!=r.get("date")?(0,d.p)(null!==(t=r.get("date"))&&void 0!==t?t:""):[],g=[{field:"company_name",headerName:"Company Name",width:200},{field:"item_type",headerName:"Item Type",width:100},{field:"item_name",headerName:"Item Name",width:200},{field:"item_qty",headerName:"Item Quantity",width:150},{field:"Total",headerName:"Total Amount",width:100,renderCell:function(e){let t,{row:r}=e,a=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2});return t="Veneer"===r.item_type?r.item_qty*r.item_rate*r.v_width*r.v_length:r.item_qty*r.item_rate,(0,n.jsx)("div",{children:a.format(t)})}},{field:"from",headerName:"Date",width:100,renderCell:function(e){let{row:t}=e;return(0,n.jsx)(o.Nn,{format:"D/M/YYYY",value:t.createdAt})}},{field:"actions",headerName:"Actions",sortable:!1,renderCell:function(e){let{row:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.w6,{hideText:!0,recordItemId:t._id}),(0,n.jsx)(o.m1,{hideText:!0,recordItemId:t._id,meta:{headers:{Authorization:"Bearer ".concat(s)}}})]})},align:"center",headerAlign:"center",minWidth:120}],{data:_,isLoading:v,isError:y}=(0,i.sm)({resource:"edpl/company",meta:{headers:{Authorization:"Bearer ".concat(s)}}}),{triggerExport:N,isLoading:b}=(0,i.S)({resource:"edpl/sales",meta:{headers:{Authorization:"Bearer ".concat(s)}},mapData:e=>{var t;if(!e||!(null==_?void 0:_.data))return console.error("Item or data is missing"),{};let r=_.data.find(t=>e.company_name===t.name),n=(null==r?void 0:r.customer_grade)||"N/A",a=(null==r?void 0:r.customer_type)||"N/A";return{...e,spid:(null===(t=m.find(t=>e.spid===t.value))||void 0===t?void 0:t.label)||"Unknown",customer_type:a,customer_grade:n,created_at:function(e){console.log(e);let t=new Date(e),r=String(t.getDate()).padStart(2,"0"),n=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return"".concat(r,"/").concat(n,"/").concat(a)}(e.createdAt)}}});p.includes("admin")&&g.unshift({field:"spid",headerName:"Added by",type:"singleSelect",sortable:!1,headerAlign:"left",align:"left",maxWidth:150,flex:.5,valueOptions:m,valueFormatter:e=>e.value,renderCell:function(e){let{row:t}=e;if(console.log(t),f)return"Loading...";{let e=m.find(e=>t.spid===e.value);return null==e?void 0:e.label}}});let{dataGridProps:x}=(0,o.LU)({pagination:{current:1,pageSize:100,mode:"off"},filters:{mode:"off"},sorters:{mode:"off"},meta:{headers:{Authorization:"Bearer ".concat(s)}}}),{sortingMode:A,sortModel:w,onSortModelChange:I,...S}=x;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.aV,{title:"Sales Records",headerButtons:e=>{let{defaultButtons:t}=e;return(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)(u.Z,{children:(0,n.jsx)(c.Z,{onClick:()=>N(),disabled:b,variant:"contained",color:"primary",children:"Export"})})]})},children:(0,n.jsx)(a._$,{getRowId:e=>e._id,...x,columns:g,sortingMode:A,sortModel:w,onSortModelChange:I})})})}}},function(e){e.O(0,[7999,936,8218,2957,7258,4349,4440,7571,4243,4799,4272,2971,2117,1744],function(){return e(e.s=7961)}),_N_E=e.O()}]);