(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3092],{24654:function(){},38763:function(e,t,r){Promise.resolve().then(r.bind(r,63883))},23019:function(e,t,r){"use strict";r.d(t,{H:function(){return o},p:function(){return l}});let a=r(68989),n="bf3c199c2470cb477d907b1e0917c17b",i="5183666c72eec9e4",o=e=>{let t=Array.isArray(e)?JSON.stringify(e):e.toString(),r=a.createCipheriv("aes-256-cbc",n,i);return r.update(t,"utf8","base64")+r.final("base64")},l=e=>{let t=a.createDecipheriv("aes-256-cbc",n,i),r=t.update(e,"base64","utf8");r+=t.final("utf8");try{return JSON.parse(r)}catch(e){return r}}},63883:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var a=r(57437),n=r(19643),i=r(67571),o=r(1899),l=r(12713),u=r(41327),s=r(64393),d=r(14087),c=r(85860),m=r(28181),h=r(21348),p=r(4926),v=r(23019),g=r(54321),f=r(2265),y=r(29501),_=r(83464),x=r(40377);function Z(){var e,t,r,Z,q,j,T,b;let k=(0,g.useCookies)(),w=(0,v.p)(null!==(b=k.get("token"))&&void 0!==b?b:""),{saveButtonProps:I,register:V,control:S,setValue:C,refineCore:{onFinish:N,formLoading:L,queryResult:E},formState:{errors:O},watch:P}=(0,p.cI)({refineCoreProps:{metaData:{headers:{Authorization:"Bearer ".concat(w)}}}}),A=P("item_type")||"Veneer",[B,J]=(0,f.useState)([]),[R,z]=(0,f.useState)("");return L?(0,a.jsx)(a.Fragment,{children:"Loading"}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(h.I8,{saveButtonProps:I,isLoading:L,title:"Edit Sales Record",children:[(0,a.jsx)(n.Z,{width:"100vw",direction:"row",spacing:1,sx:{justifyContent:"flex-start",alignItems:"flex-start",overflow:"auto"},children:B.map((e,t)=>(0,a.jsx)(i.Z,{label:e,variant:"outlined",onClick:()=>{"company"==R?C("company_name",e):C("item_name",e)},sx:{marginBottom:"10"}},e))}),(0,a.jsxs)(o.Z,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,a.jsx)(l.Z,{...V("company_name",{required:"This field is required"}),label:"Company Name",margin:"normal",variant:"outlined",onInput:e=>{var t,r;t=e.target.value,r={method:"GET",url:"".concat(x.T5,"edpl/company/companies/search/").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},_.Z.request(r).then(function(e){let t=e.data.map(e=>e.name);J(t),console.log(t.length),z("company")}).catch(function(e){J([]),console.error(e)})},defaultValue:null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.data.company_name,required:!0,error:!!O.company_name,helperText:O.company_name?O.company_name.message:""}),(0,a.jsxs)(u.Z,{component:"fieldset",children:[(0,a.jsx)(s.Z,{component:"legend",children:"Item Type"}),(0,a.jsx)(y.Qr,{control:S,name:"item_type",defaultValue:"Veneer",rules:{required:"This field is required"},render:e=>{let{field:t}=e;return(0,a.jsxs)(d.Z,{...t,children:[(0,a.jsx)(c.Z,{value:"Veneer",control:(0,a.jsx)(m.Z,{}),label:"Veneer"}),(0,a.jsx)(c.Z,{value:"Laminate",control:(0,a.jsx)(m.Z,{}),label:"Laminate"})]})}})]}),(0,a.jsx)(l.Z,{...V("item_name",{required:"This field is required"}),label:"Item Name",margin:"normal",variant:"outlined",defaultValue:null==E?void 0:null===(t=E.data)||void 0===t?void 0:t.data.item_name,required:!0,onInput:e=>{var t,r,a,n;"Veneer"==A?(t=e.target.value,r={method:"GET",url:"".concat(x.T5,"edpl/veneer/veneer/search/").concat(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},_.Z.request(r).then(function(e){let t=e.data.map(e=>e.ItemName);J(t),console.log(t.length),z("veener")}).catch(function(e){J([]),console.error(e)})):(a=e.target.value,n={method:"GET",url:"".concat(x.T5,"edpl/laminate/laminate/search/").concat(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}},_.Z.request(n).then(function(e){let t=e.data.map(e=>e.ItemName);J(t),console.log(t.length),z("veener")}).catch(function(e){J([]),console.error(e)}))},error:!!O.item_name,helperText:O.item_name?O.item_name.message:""}),(0,a.jsx)(l.Z,{...V("item_qty",{required:"This field is required"}),label:"Item Quantity",margin:"normal",variant:"outlined",defaultValue:null==E?void 0:null===(r=E.data)||void 0===r?void 0:r.data.item_qty,required:!0,error:!!O.item_qty,helperText:O.item_qty?O.item_qty.message:""}),(0,a.jsx)(l.Z,{...V("item_rate",{required:"This field is required"}),label:"Item Rate",margin:"normal",variant:"outlined",defaultValue:null==E?void 0:null===(Z=E.data)||void 0===Z?void 0:Z.data.item_rate,required:!0,error:!!O.item_rate,helperText:O.item_rate?O.item_rate.message:""}),"Veneer"==A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{...V("v_width",{required:"This field is required"}),label:"Veneer Width",margin:"normal",variant:"outlined",required:!0,defaultValue:null==E?void 0:null===(q=E.data)||void 0===q?void 0:q.data.v_width,error:!!O.v_width}),(0,a.jsx)(l.Z,{...V("v_length",{required:"This field is required"}),label:"Veneer Length",margin:"normal",variant:"outlined",required:!0,defaultValue:null==E?void 0:null===(j=E.data)||void 0===j?void 0:j.data.v_length,error:!!O.v_length})]}),(0,a.jsx)(l.Z,{...V("remark"),label:"Remark",margin:"normal",variant:"outlined",defaultValue:null==E?void 0:null===(T=E.data)||void 0===T?void 0:T.data.remark,required:!0,error:!!O.remark,helperText:O.remark?O.remark.message:""})]})]})})}},16558:function(e,t,r){"use strict";r.r(t),r.d(t,{API_URL:function(){return o},authProvider:function(){return u},photos:function(){return l}});var a=r(83464),n=r(64131),i=r(23019),o="",l="";o="http://195.35.22.220:8080/api/";let u={login:async e=>{let{email:t,password:r,remember:l}=e;try{let e={method:"POST",url:"".concat(o,"auth/sales_team/login"),headers:{"content-type":"application/json"},data:{email:t,password:r}},{data:u}=await a.Z.request(e);if(JSON.parse(JSON.stringify(u)),null==u)return{success:!1,error:{name:"LoginError",message:"Invalid username or password"}};{let{message:e,access:t,uuid:r}=u;return n.Z.set("token",(0,i.H)(e),{expires:l?30:1,path:"/"}),n.Z.set("date",(0,i.H)(t.toString()),{expires:l?30:1,path:"/"}),n.Z.set("uuid",r,{expires:l?30:1,path:"/"}),window.location.href="/approvedProjects?pageSize=100&current=1",{success:!0}}}catch(e){return console.error("Login error:",e),{success:!1,error:{name:"LoginError",message:"Invalid username or password"}}}},logout:async()=>(n.Z.remove("date",{path:"/"}),n.Z.remove("date",{path:"/"}),n.Z.remove("token",{path:"/"}),window.location.href="/login",{success:!0}),check:async()=>{let e=n.Z.get("token"),t=n.Z.get("date"),r=n.Z.get("uuid");return e&&t&&r?{authenticated:!0}:{authenticated:!1,logout:!0,redirectTo:"/"}},getPermissions:async()=>n.Z.get("date")||null,getIdentity:async()=>n.Z.get("date")||null,onError:async e=>{var t;return(console.log(e),(null===(t=e.response)||void 0===t?void 0:t.status)===401)?{logout:!0}:{error:e}}}},40377:function(e,t,r){"use strict";r.d(t,{T5:function(){return a.API_URL},L1:function(){return n}});var a=r(16558);let n={check:async e=>{var t=JSON.parse(JSON.stringify(null!=e?e:{}));let r=t.token,a=t.date,n=t.uuid;return r&&a&&n?{authenticated:!0}:{authenticated:!1,logout:!0,redirectTo:"/"}}}}},function(e){e.O(0,[7999,936,8218,2957,7258,4349,4440,7571,3825,6418,2971,2117,1744],function(){return e(e.s=38763)}),_N_E=e.O()}]);