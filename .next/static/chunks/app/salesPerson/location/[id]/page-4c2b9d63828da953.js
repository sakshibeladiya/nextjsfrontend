(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4041],{12506:function(e,t,r){Promise.resolve().then(r.bind(r,58804))},23019:function(e,t,r){"use strict";r.d(t,{H:function(){return o},p:function(){return i}});let n=r(68989),a="bf3c199c2470cb477d907b1e0917c17b",c="5183666c72eec9e4",o=e=>{let t=Array.isArray(e)?JSON.stringify(e):e.toString(),r=n.createCipheriv("aes-256-cbc",a,c);return r.update(t,"utf8","base64")+r.final("base64")},i=e=>{let t=n.createDecipheriv("aes-256-cbc",a,c),r=t.update(e,"base64","utf8");r+=t.final("utf8");try{return JSON.parse(r)}catch(e){return r}}},58804:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(57437),a=r(99376),c=r(2265),o=r(83464);r(34586);var i=r(87293),s=r(23019),l=r(54321),u=e=>{var t;let{idd:u}=e,d=(0,a.useSearchParams)(),p=d.get("type")||"",f=d.get("date")||"",h=(0,c.useRef)(null),[g,v]=(0,c.useState)(null),[m,y]=(0,c.useState)([]),[b,w]=(0,c.useState)(!0),_=(0,l.useCookies)(),k=(0,s.p)(null!==(t=_.get("token"))&&void 0!==t?t:""),j=[20.5937,78.9629],E=async e=>{try{let e=await o.Z.get("".concat(i.T,"/edpl/location/").concat(u),{params:{date:f,type:p},headers:{Authorization:"Bearer ".concat(k)}});y(e.data)}catch(e){console.error("Error fetching markers:",e)}finally{w(!1)}};return((0,c.useEffect)(()=>{w(!0),E(u)},[u]),(0,c.useEffect)(()=>(g||r.e(4212).then(r.t.bind(r,60759,23)).then(e=>{v(e)}),()=>{h.current&&(h.current.innerHTML="")}),[g]),(0,c.useEffect)(()=>{if(g&&h.current){let e=g.map(h.current,{center:m.length>0?[m[0].lat,m[0].lon]:j,zoom:13,scrollWheelZoom:!0});g.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e);let t=g.icon({iconUrl:"/map-marker.png",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]});return m.length>0&&m.forEach(r=>{let n=r.lat,a=r.lon;g.marker([n,a],{icon:t}).addTo(e).bindPopup("UID: ".concat(r.uid,"<br/>Time: ").concat(r.time))}),()=>{e&&e.remove()}}},[g,m]),b)?(0,n.jsx)("div",{children:"Loading map..."}):(0,n.jsx)("div",{style:{height:"90vh",margin:"-10px"},children:(0,n.jsx)("div",{ref:h,style:{height:"100%"}})})},d=()=>{let e=(0,a.usePathname)().split("/").pop();return(0,n.jsx)("div",{children:(0,n.jsx)(u,{idd:e})})}},87293:function(e,t,r){"use strict";r.d(t,{T:function(){return u},myDataProvider:function(){return p},_:function(){return d}});var n=r(88017);let a=e=>{if(e&&e.length>0){let t=[],r=[];return e.map(e=>{t.push(e.field),r.push(e.order)}),{_sort:t,_order:r}}},c=e=>{switch(e){case"ne":case"gte":case"lte":return"_".concat(e);case"contains":return"_like";default:return""}},o=e=>{let t={};return e&&e.map(e=>{if("or"===e.operator||"and"===e.operator)throw Error("[@refinedev/simple-rest]: `operator: ".concat(e.operator,"` is not supported. You can create custom data provider. https://refine.dev/docs/api-reference/core/providers/data-provider/#creating-a-data-provider"));if("field"in e){let{field:r,operator:n,value:a}=e;if("q"===r){t[r]=a;return}let o=c(n);t["".concat(r).concat(o)]=a}}),t};var i=r(83464),s=r(64131);let l=i.Z.create();l.interceptors.request.use(e=>{let t=s.Z.get("uuid");return t&&(e.headers.uuid=t),e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t,r,n;return Promise.reject({...e,message:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message,statusCode:null===(n=e.response)||void 0===n?void 0:n.status})});var u="",d="";d="http://195.35.22.220:8080/assets/uploads/";let p={...function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return{getList:async r=>{let{resource:c,pagination:i,filters:s,sorters:l,meta:u}=r;console.log(s,"filters");let d="".concat(e,"/").concat(c),{current:p=1,pageSize:f=10,mode:h="server"}=null!=i?i:{},{headers:g,method:v}=null!=u?u:{},m=o(s),y={};"server"===h&&(y._start=(p-1)*f,y._end=p*f);let b=a(l);if(b){let{_sort:e,_order:t}=b;y._sort=e.join(","),y._order=t.join(",")}let w={...y,...m},_=Object.keys(w).length?"".concat(d,"?").concat((0,n.stringify)(w)):d;var k={...g};let{data:j,headers:E}=await t[null!=v?v:"get"](_,{headers:k});return{data:j,total:+E["x-total-count"]||j.length}},getMany:async r=>{let{resource:a,ids:c,meta:o}=r,{headers:i,method:s}=null!=o?o:{},{data:l}=await t[null!=s?s:"get"]("".concat(e,"/").concat(a,"?").concat((0,n.stringify)({id:c})),{headers:i});return{data:l}},create:async r=>{let{resource:n,variables:a,meta:c}=r,o="".concat(e,"/").concat(n),{headers:i,method:s}=null!=c?c:{};var l={...i};let{data:u}=await t[null!=s?s:"post"](o,a,{headers:l});return{data:u}},update:async r=>{let{resource:n,id:a,variables:c,meta:o}=r,i="".concat(e,"/").concat(n,"/").concat(a),{headers:s,method:l}=null!=o?o:{};var u={...s};let{data:d}=await t[null!=l?l:"put"](i,c,{headers:u});return{data:d}},getOne:async r=>{let{resource:n,id:a,meta:c}=r,o="".concat(e,"/").concat(n,"/").concat(a),{headers:i,method:s}=null!=c?c:{},{data:l}=await t[null!=s?s:"get"](o,{headers:i});return{data:l}},deleteOne:async r=>{let{resource:n,id:a,variables:c,meta:o}=r,i="".concat(e,"/").concat(n,"/").concat(a),{headers:s,method:l}=null!=o?o:{},{data:u}=await t[null!=l?l:"delete"](i,{data:c,headers:s});return{data:u}},getApiUrl:()=>e,custom:async e=>{let r,{url:c,method:i,filters:s,sorters:l,payload:u,query:d,headers:p}=e,f="".concat(c,"?");if(l){let e=a(l);if(e){let{_sort:t,_order:r}=e,a={_sort:t.join(","),_order:r.join(",")};f="".concat(f,"&").concat((0,n.stringify)(a))}}if(s){let e=o(s);f="".concat(f,"&").concat((0,n.stringify)(e))}switch(d&&(f="".concat(f,"&").concat((0,n.stringify)(d))),i){case"put":case"post":case"patch":r=await t[i](c,u,{headers:p});break;case"delete":r=await t.delete(c,{data:u,headers:p});break;default:r=await t.get(f,{headers:p})}let{data:h}=r;return Promise.resolve({data:h})}}}(u="http://195.35.22.220:8080/api")}},34586:function(){}},function(e){e.O(0,[9168,8218,2957,4440,3825,8049,2971,2117,1744],function(){return e(e.s=12506)}),_N_E=e.O()}]);